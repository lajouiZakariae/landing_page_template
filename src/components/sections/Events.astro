---
import MainTitle from '../MainTitle.astro';
import EventsImg from '~/assets/imgs/events.png';
---

<section id="events">
  <div class="dots dots-up"></div>
  <div class="dots dots-down"></div>
  <MainTitle>Latest Events</MainTitle>
  <div class="container">
    <img src={EventsImg.src} alt="" />
    <div class="info">
      <div class="time">
        <div class="unit">
          <span class="days">15</span>
          <span>Days</span>
        </div>
        <div class="unit">
          <span class="hours">08</span>
          <span>Hours</span>
        </div>
        <div class="unit">
          <span class="minutes">45</span>
          <span>Minutes</span>
        </div>
        <div class="unit">
          <span class="seconds">55</span>
          <span>Seconds</span>
        </div>
      </div>
      <h2 class="title">Tech Masters Event 2021</h2>
      <p class="description">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Et vero tenetur doloremque iusto ut adipisci quam
        ratione aliquam excepturi nulla in harum, veritatis porro
      </p>
    </div>
    <div class="subscribe">
      <form action="">
        <input type="email" placeholder="Enter Your Email" />
        <input type="submit" value="Subscribe" />
      </form>
    </div>
  </div>
</section>

<style lang="scss">
  section {
    padding-top: var(--main-padding-top);
    padding-bottom: var(--main-padding-bottom);
    position: relative;

    .container {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
    }

    img {
      max-width: 450px;

      @media (max-width: 991px) {
        display: none;
      }
    }

    .info {
      flex: 1;
    }

    .time {
      display: flex;
      align-items: center;
      margin: 20px auto;
      gap: 10px;
      justify-content: center;

      .unit {
        border: 1px solid #d4d4d4;
        border-radius: 6px;
        text-align: center;
        width: 75px;
        transition: var(--main-transition);

        span {
          display: block;
          transition: var(--main-transition);

          &:first-child {
            font-size: 35px;
            padding: 15px;
            color: var(--main-color);
            font-weight: bold;
          }

          &:last-child {
            padding: 8px 10px;
            font-size: 13px;
            border-top: 1px solid #d4d4d4;
          }
        }

        &:hover,
        &:hover span:last-child {
          border-color: var(--main-color);
        }
      }
    }

    .title {
      text-align: center;
      margin: 40px 0 0;
      font-size: 30px;
    }

    .description {
      text-align: center;
      line-height: 1.7;
      font-size: 19px;
      color: #777;
    }

    .subscribe {
      width: 100%;
      margin-top: 50px;

      form {
        width: 600px;
        margin: 20px auto;
        padding: 30px 40px;
        background-color: #f6f5f5;
        border-radius: 50px;
        display: flex;
        gap: 20px;

        @media (max-width: 767px) {
          max-width: 100%;
          padding: 20px;
          flex-direction: column;
          border-radius: 0;
        }

        input[type='email'] {
          padding: 20px;
          border-radius: 50px;
          border: none;
          flex: 1;
          caret-color: var(--main-color);

          @media (max-width: 767px) {
            border-radius: 0;
          }

          &:focus {
            outline: none;
          }

          &::placeholder {
            transition: opacity var(--main-transition);
          }

          &:focus::placeholder {
            opacity: 0;
          }
        }

        input[type='submit'] {
          border-radius: 50px;
          border: none;
          background-color: var(--main-color);
          color: white;
          font-weight: bold;
          padding: 20px;
          cursor: pointer;
          transition: var(--main-transition);

          @media (max-width: 767px) {
            border-radius: 0;
          }

          &:hover {
            background-color: var(--main-color-alt);
          }
        }
      }
    }
  }
</style>

<script lang="ts">
  let countDownDate = new Date('Feb 1, 2024 23:59:59').getTime();
  // console.log(countDownDate);

  let counter = setInterval(() => {
    // Get Date Now
    let dateNow = new Date().getTime();

    // Find The Date Difference Between Now And Countdown Date
    let dateDiff = countDownDate - dateNow;

    // Get Time Units
    // let days = Math.floor(dateDiff / 1000 / 60 / 60 / 24);
    let days = Math.floor(dateDiff / (1000 * 60 * 60 * 24));
    let hours = Math.floor((dateDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    let minutes = Math.floor((dateDiff % (1000 * 60 * 60)) / (1000 * 60));
    let seconds = Math.floor((dateDiff % (1000 * 60)) / 1000);

    document.querySelector('.days').innerHTML = days < 10 ? `0${days}` : days;
    document.querySelector('.hours').innerHTML = hours < 10 ? `0${hours}` : hours;
    document.querySelector('.minutes').innerHTML = minutes < 10 ? `0${minutes}` : minutes;
    document.querySelector('.seconds').innerHTML = seconds < 10 ? `0${seconds}` : seconds;

    if (dateDiff < 0) {
      clearInterval(counter);
    }
  }, 1000);
</script>
